import pandas as pd
import scipy.stats as stats
import statsmodels.api as sm
from sklearn.metrics import mean_squared_error

# Load dataset
df = pd.read_csv(
    r'C:\Users\Parthiban\Downloads\student+performance\student\student-por.csv',
    delimiter=";"
)

x = df["studytime"]
y = df["G3"]

# Correlation
corr, p_value = stats.pearsonr(x, y)
print(f"Correlation coefficient: {corr:.3f}, p-val: {p_value:.3e}")

# Linear Regression
x_const = sm.add_constant(x)
model = sm.OLS(y, x_const).fit()
intercept, slope = model.params
print(f"Intercept: {intercept:.3f}")
print(f"Slope: {slope:.3f}")

# Predictions (first 10 only)
pred_y = model.predict(x_const)
print(f"Predicted scores: {pred_y[:10].round(2).tolist()}")

# Mean Squared Error
mse = mean_squared_error(y, pred_y)
print(f"Mean squared error: {mse:.3f}")

# Example prediction
studytime_value = 2
pred_example = model.predict([1, studytime_value])
print(f"Predicted final score for studytime={studytime_value}: {pred_example[0]:.2f}")
